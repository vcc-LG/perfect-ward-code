<div class="container">
    <h1>Questionnaires</h1>
    <hr/>
    <h3>Available questionnaires:</h3>
    <% if @questionnaires.empty? %>
        <p> No questionnaires present in the database. </p>
    <% else %>
        <ul>
            <% @questionnaires.each do |q| %>
                <li> 
                    <%= link_to "#{q.title}", new_response_path(questionnaire_id: q.id) %>
                </li>
            <% end %>
        </ul>
    <% end %>
    <br>
    <h3>Candidate responses:</h3>
        <ul>
            <% @questionnaires.each do |q| %>
                <li><%= q.title %></li>
                <ul>
                    <% @candidates.each do |c| %>
                        <li>
                            <%= c.name %>: 
                            <% score = q.score(candidate: c) %>
                            <% if score %>
                                <em><%= score %> %</em>
                                <%= link_to "➡", responses_path(questionnaire_id: q.id, candidate_id: c.id) %>
                            <% else %>
                                <em>No response</em>
                            <% end %>
                        </li>
                    <% end %>
                </ul>
            <% end %>
        </ul>
    <br>
    <h3>Total average scores:</h3>   
    <ul>
        <% @candidates.each do |c| %>
            <li><%= c.name %> : <%= c.total_average_score %> %</li>
        <% end %>
    </ul>    
</div>

